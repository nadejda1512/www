<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
</head>
<?php
$a = 'Греф назвал ипотеку единственным способом купить жилье для большинства россиян. По словам главы Сбербанка, доступность жилья для россиян сохраняется, «несмотря на рост цен на первичное и вторичное жилье в 2020 году, который частично связан с рекордно низким уровнем процентных ставок по ипотечным кредитам».
Коммерсантъ
Со своей стороны Сбербанк стремится держать ставки на приемлемом уровне, добавил глава кредитной организации.
РИА Новости
По данным сайта банка, взять кредит на покупку квартиры в новостройке можно от 8,4% годовых, на вторичном рынке - от 8,1% годовых.
РИА Новости
В результате спрос на ипотеку стабильно растет, отметил Греф.
РИ'; //Переменной $a присволили текст новости
 
$link = 'https://yandex.ru/news/story/Gref_nazval_ipoteku_edinstvennym_sposobom_kupit_zhile_dlyabolshinstva_rossiyan--4137b9d5c89628761f367e6962b7544e?lang=ru&rubric=business&fan=1&stid=XnXSoNk2x59PJnMe1EQH&t=1636305995&tt=true&persistent_id=168590897'; //переменной $link присволили ссылку на полный текст новости
 
$b  = substr($a, 0, 160); //переменной b присволил текст из переменной a и сократили его до 160 симв
$b = rtrim($b, "!,.-"); //проверили последние символы текста
$b = substr($b, 0, strrpos($b, ' '));//проверили стоит ли пробел в конце текста
$array = explode ( ' ', $b ); //создаем массив из строк переменной b
$last = implode ( ' ', array_slice($array, count($array)-2, 2));//присваиваем переменной last два последних слова текста
$last1 = strrpos($b, ' '); // все символы с конца до пробела  присваиваем переменной last1
$b = substr($b, 0, $last1); // из текста переменной b удаляем с конца перемен last1, т е последние символы до пробела (слово) 
$last1 = strrpos($b, ' '); // повтор со вторым словом с конца
$b = substr($b, 0, $last1); // повтор со вторым словом с конца

//$b= preg_replace( "/\s[a-z:]+\s[a-z]+$/i", "$1", $b );

$result = ' '.$b.' <a href="' . $link . '">' . $last . '...</a>'; //вывод переменной b двух последних слов текста и ссылка
 
echo $result;
?>
